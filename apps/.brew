#!/bin/bash

TAPS=(
	homebrew/dupes
	homebrew/versions
	homebrew/homebrew-php
	mpv-player/mpv
)

PKGS=(
	caskroom/cask/brew-cask
	tree
	node
	lftp
	git
	gpg
	php56
	"mpv --with-bundle"
	mosh
	unrar
)

LINKAPPS=(
	mpv
)

echo "==> Updating homebrew"
brew update

echo "==> Upgrading installed formulae"
brew upgrade

for TAP in ${TAPS[@]}; do
	brew tap "$TAP"
done

for ((i = 0; i < ${#PKGS[@]}; i++)); do
	PKG="${PKGS[$i]}"
	IFS=' ' read -a BREW_ARGS <<< "$PKG"
	brew install "${BREW_ARGS[@]}"
done

for APP in ${LINKAPPS[@]}; do
	brew linkapps "$APP"
done

# Cleanup outdated things
echo "==> Cleaning up homebrew"
brew cleanup
